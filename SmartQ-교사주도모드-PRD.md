# SmartQ 교사 주도 모드 PRD (Product Requirements Document)

## 1. 제품 개요

### 1.1 프로젝트명
SmartQ 세션 모드 확장 - "교사 주도 질문-답변 모드"

### 1.2 목적
기존의 학생 자유 질문 방식에 더해, 교사가 질문을 제시하고 학생들이 답변하는 구조화된 상호작용 모드를 추가하여 교육 효과를 극대화

### 1.3 핵심 가치
- **구조화된 학습**: 교사 주도의 체계적인 수업 진행
- **즉각적 평가**: 실시간 형성평가 및 이해도 점검
- **유연한 선택**: 수업 목적에 따른 모드 선택의 자유

---

## 2. 사용자 스토리

### 2.1 교사 관점
- "나는 수업 중 특정 시점에 전체 학생들의 이해도를 확인하고 싶다"
- "나는 핵심 개념에 대한 학생들의 다양한 관점을 수집하고 싶다"
- "나는 수업 유형에 따라 자유 질문과 구조화된 질문을 선택하고 싶다"

### 2.2 학생 관점
- "나는 선생님의 질문에 내 생각을 표현하고 싶다"
- "나는 다른 친구들의 답변을 보며 다양한 관점을 배우고 싶다"
- "나는 선생님 질문에 답하면서도 궁금한 점을 질문하고 싶다"

---

## 3. 기능 요구사항

### 3.1 세션 생성 시 모드 선택

#### UI 변경사항
```
[세션 만들기 화면]

제목: [_________________]
과목: [선택 ▼]

📋 세션 운영 방식 (NEW!)
┌─────────────────────────────────┐
│ ○ 자유 질문 모드 (기본)          │
│   학생들이 자유롭게 질문합니다    │
│                                 │
│ ○ 교사 주도 Q&A 모드 (NEW!)     │
│   교사가 질문하고 학생이 답합니다 │
└─────────────────────────────────┘

[세션 만들기] 버튼
```

#### 데이터 구조 확장
```typescript
interface Session {
  // 기존 필드들...
  sessionMode: 'free_question' | 'teacher_led_qa';  // NEW!
  teacherQuestions?: TeacherQuestion[];              // NEW!
}

interface TeacherQuestion {
  questionId: string;
  text: string;
  createdAt: number;
  order: number;  // 질문 순서
  isActive: boolean;  // 현재 활성화된 질문
  responses: StudentResponse[];
}

interface StudentResponse {
  responseId: string;
  studentId: string;
  studentName?: string;
  text: string;
  createdAt: number;
  likes?: { [studentId: string]: boolean };
}
```

### 3.2 교사 대시보드 - 교사 주도 모드

#### 새로운 UI 컴포넌트
```
[교사 세션 관리 화면 - 교사 주도 모드]

┌─────────────────────────────────────┐
│ 📝 질문 관리                         │
├─────────────────────────────────────┤
│ [+ 새 질문 추가]                    │
│                                     │
│ 질문 1: "오늘 배운 개념 중..."       │
│ [활성화] [수정] [삭제]              │
│ 답변: 23/30명                       │
│                                     │
│ 질문 2: "실생활 예시를..."          │
│ [활성화] [수정] [삭제]              │
│ 답변: 0/30명 (대기중)               │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ 📊 실시간 답변 현황                  │
├─────────────────────────────────────┤
│ 현재 질문: "오늘 배운 개념 중..."    │
│                                     │
│ • 학생A: "저는 광합성이..."         │
│   ❤️ 5                              │
│ • 익명: "물의 순환 과정이..."       │
│   ❤️ 12                             │
│                                     │
│ [AI 답변 분석] [다음 질문으로]      │
└─────────────────────────────────────┘
```

### 3.3 학생 화면 - 교사 주도 모드

#### 학생 세션 페이지 변경
```
[학생 화면 - 교사 주도 모드]

┌─────────────────────────────────────┐
│ 🙋 선생님 질문                       │
├─────────────────────────────────────┤
│ "오늘 배운 개념 중 가장 흥미로웠던   │
│  것은 무엇이고 그 이유는?"          │
│                                     │
│ [답변 작성하기]                     │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ 💬 친구들의 답변 (23개)             │
├─────────────────────────────────────┤
│ • 민수: "광합성이 흥미로웠어요..."   │
│   ❤️ 좋아요                         │
│                                     │
│ • 익명: "식물도 숨을 쉰다는..."     │
│   ❤️ 좋아요                         │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│ ❓ 추가 질문이 있나요?              │
├─────────────────────────────────────┤
│ [자유롭게 질문하기]                 │
└─────────────────────────────────────┘
```

### 3.4 AI 분석 기능 확장

#### 교사 주도 모드 전용 분석
```typescript
interface TeacherLedAnalysis {
  questionId: string;
  
  // 답변 분류
  responseCategories: {
    category: string;
    responses: string[];
    count: number;
    percentage: number;
  }[];
  
  // 핵심 키워드
  keyInsights: string[];
  
  // 이해도 평가
  comprehensionLevel: {
    high: number;  // 깊은 이해
    medium: number;  // 보통 이해
    low: number;  // 표면적 이해
    misconception: number;  // 오개념
  };
  
  // 추천 후속 활동
  followUpSuggestions: string[];
}
```

---

## 4. 기술 구현 방안

### 4.1 최소 변경 원칙
- 기존 코드베이스 유지
- 새로운 컴포넌트 추가 방식
- 조건부 렌더링으로 모드 전환

### 4.2 주요 구현 영역

#### Frontend 변경사항
```
src/
├── components/
│   ├── teacher/
│   │   ├── CreateSessionForm.tsx (수정)
│   │   ├── TeacherQuestionManager.tsx (신규)
│   │   └── ResponseAnalytics.tsx (신규)
│   └── student/
│       ├── TeacherQuestionView.tsx (신규)
│       └── ResponseInput.tsx (신규)
```

#### API 라우트 추가
```
src/app/api/
├── teacher-questions/
│   ├── create/route.ts
│   ├── update/route.ts
│   └── activate/route.ts
└── responses/
    └── submit/route.ts
```

### 4.3 Firebase 규칙 확장
```json
{
  "teacherQuestions": {
    "$sessionId": {
      ".read": "true",
      ".write": "auth != null && root.child('sessions').child($sessionId).child('teacherId').val() == auth.uid",
      "$questionId": {
        "responses": {
          "$responseId": {
            ".write": "true"  // 학생 익명 작성 가능
          }
        }
      }
    }
  }
}
```

---

## 5. UI/UX 가이드라인

### 5.1 모드 전환의 명확성
- 세션 생성 시 모드 선택 안내 툴팁
- 각 모드의 특징 명확히 표시
- 세션 목록에서 모드 아이콘으로 구분

### 5.2 일관된 사용자 경험
- 기존 UI 패턴 유지
- 동일한 색상 체계 및 아이콘 스타일
- 반응형 디자인 적용

### 5.3 접근성 고려
- 모바일 최적화 유지
- 다크모드 완벽 지원
- 교육 레벨별 적응형 UI 적용

---

## 6. 성공 지표

### 6.1 사용성 지표
- 교사 주도 모드 선택 비율
- 평균 교사 질문 수
- 학생 답변 참여율

### 6.2 교육 효과 지표
- 답변의 질적 수준 향상도
- 수업 목표 달성도
- 학생 만족도

### 6.3 기술 지표
- 응답 시간 (기존 대비 동일 수준)
- 에러율 1% 미만
- 동시 접속 안정성

---

## 7. 개발 로드맵

### Phase 1: 기초 구현 (2주)
- [ ] 데이터 모델 확장
- [ ] 세션 생성 UI 수정
- [ ] 기본 CRUD API 구현

### Phase 2: 핵심 기능 (2주)
- [ ] 교사 질문 관리 UI
- [ ] 학생 답변 UI
- [ ] 실시간 동기화

### Phase 3: AI 통합 (1주)
- [ ] 답변 분석 API
- [ ] 분석 결과 시각화
- [ ] 인사이트 제공

### Phase 4: 완성 및 테스트 (1주)
- [ ] 통합 테스트
- [ ] 성능 최적화
- [ ] 문서화

---

## 8. 리스크 및 대응 방안

### 8.1 기술적 리스크
- **복잡도 증가**: 모듈화로 관리
- **성능 이슈**: 캐싱 전략 적용
- **동시성 문제**: Firebase 트랜잭션 활용

### 8.2 사용성 리스크
- **혼란 가능성**: 명확한 온보딩
- **학습 곡선**: 단계별 가이드 제공
- **모드 혼용**: 세션별 독립 운영

---

## 9. 향후 확장 가능성

### 9.1 하이브리드 모드
- 세션 중 모드 전환 기능
- 시간대별 모드 스케줄링

### 9.2 고급 분석
- 학생별 성장 추적
- 반복 질문 패턴 분석
- 예측 모델 구축

### 9.3 평가 연계
- 자동 채점 기능
- 루브릭 기반 평가
- 포트폴리오 생성

---

## 10. 결론

이 기능은 SmartQ를 단순한 질문 수집 도구에서 **"양방향 상호작용 학습 플랫폼"**으로 진화시킵니다. 

교사에게는 수업 설계의 자유를, 학생에게는 능동적 참여의 기회를 제공하여, 진정한 의미의 **"스마트한 교육"**을 실현할 수 있을 것입니다.

**"질문하는 교사, 생각하는 학생, 함께 성장하는 SmartQ"**